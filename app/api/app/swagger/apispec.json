{
  "swagger": "2.0",
  "info": {
    "title": "API de Registro de Sensores",
    "description": "API REST para administrar unidades, tipos de sensores, sensores y mediciones. También permite registrar valores enviados por sensores mediante `usuario_id`.",
    "version": "1.0.0"
  },
  "basePath": "/",
  "schemes": ["http"],
  "paths": {
    "/unidades": {
      "post": {
        "tags": ["Unidades"],
        "summary": "Crear una unidad",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "nombre": { "type": "string", "example": "°C" },
                "booleana": { "type": "boolean", "example": false }
              },
              "required": ["nombre"]
            }
          }
        ],
        "responses": {
          "201": { "description": "Unidad creada" }
        }
      }
    },
    "/unidades/{id}": {
      "delete": {
        "tags": ["Unidades"],
        "summary": "Eliminar una unidad",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "integer" }
        ],
        "responses": { "200": { "description": "Unidad eliminada" } }
      }
    },

    "/tipo_sensor": {
      "post": {
        "tags": ["Tipo Sensor"],
        "summary": "Crear un tipo de sensor",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "nombre": { "type": "string", "example": "Temperatura" },
                "descripcion": { "type": "string", "example": "Sensor que mide °C" },
                "unidad_id": { "type": "integer", "example": 1 },
                "medicion_min": { "type": "number", "example": -50 },
                "medicion_max": { "type": "number", "example": 100 }
              },
              "required": ["nombre", "unidad_id"]
            }
          }
        ],
        "responses": { "201": { "description": "Tipo sensor creado" } }
      }
    },

    "/tipo_sensor/{id}": {
      "delete": {
        "tags": ["Tipo Sensor"],
        "summary": "Eliminar un tipo de sensor",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "integer" }
        ],
        "responses": { "200": { "description": "Eliminado" } }
      }
    },

    "/sensores": {
      "post": {
        "tags": ["Sensores"],
        "summary": "Crear un sensor",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "usuario_id": { "type": "integer", "example": 1001 },
                "nombre": { "type": "string", "example": "Sensor Frente" },
                "ubicacion": { "type": "string", "example": "Entrada edificio" },
                "tipo_id": { "type": "integer", "example": 3 }
              },
              "required": ["usuario_id", "tipo_id"]
            }
          }
        ],
        "responses": { "201": { "description": "Sensor creado" } }
      }
    },

    "/sensores/{usuario_id}": {
      "delete": {
        "tags": ["Sensores"],
        "summary": "Eliminar un sensor por usuario_id",
        "parameters": [
          { "name": "usuario_id", "in": "path", "type": "integer", "required": true }
        ],
        "responses": { "200": { "description": "Sensor eliminado" } }
      }
    },

    "/mediciones": {
      "post": {
        "tags": ["Mediciones"],
        "summary": "Crear una medición",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "usuario_id": { "type": "integer", "example": 1001 },
                "medicion": { "type": "number", "example": 21.3 }
              },
              "required": ["usuario_id", "medicion"]
            }
          }
        ],
        "responses": { "201": { "description": "Medición creada" } }
      }
    },

    "/mediciones/{id}": {
      "delete": {
        "tags": ["Mediciones"],
        "summary": "Eliminar una medición",
        "parameters": [
          { "name": "id", "in": "path", "type": "integer", "required": true }
        ],
        "responses": { "200": { "description": "Eliminado" } }
      }
    },

    "/sensor": {
      "post": {
        "tags": ["Ingreso desde sensores"],
        "summary": "Registrar un valor enviado por un sensor",
        "description": "Este endpoint es el que utilizan los sensores físicos para enviar datos en tiempo real.",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "properties": {
                "usuario_id": { "type": "integer", "example": 1001 },
                "valor": { "type": "number", "example": 25.7 }
              },
              "required": ["usuario_id", "valor"]
            }
          }
        ],
        "responses": {
          "201": { "description": "Valor registrado" },
          "400": { "description": "Error de datos" }
        }
      }
    }
  },

  "tags": [
    { "name": "Unidades" },
    { "name": "Tipo Sensor" },
    { "name": "Sensores" },
    { "name": "Mediciones" },
    { "name": "Ingreso desde sensores" }
  ]
}
