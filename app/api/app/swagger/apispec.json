{
  "swagger": "2.0",
  "info": {
    "title": "API de Registro de Sensores",
    "description": "API REST para administrar unidades, tipos de sensores, sensores y mediciones. Incluye un endpoint para el envío de valores desde sensores físicos.",
    "version": "1.1.0"
  },
  "basePath": "/",
  "schemes": ["http"],

  "paths": {

    "/unidades": {
      "get": {
        "tags": ["Unidades"],
        "summary": "Obtener todas las unidades",
        "responses": {
          "200": { "description": "Lista de unidades" }
        }
      },
      "post": {
        "tags": ["Unidades"],
        "summary": "Crear una unidad",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "required": ["nombre"],
              "properties": {
                "nombre": { "type": "string", "example": "°C" },
                "booleana": { "type": "boolean", "example": false }
              }
            }
          }
        ],
        "responses": { "201": { "description": "Unidad creada" } }
      }
    },

    "/unidades/{id}": {
      "get": {
        "tags": ["Unidades"],
        "summary": "Obtener una unidad por ID",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "integer" }
        ],
        "responses": { "200": { "description": "Unidad encontrada" } }
      },
      "delete": {
        "tags": ["Unidades"],
        "summary": "Eliminar una unidad",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "integer" }
        ],
        "responses": { "200": { "description": "Unidad eliminada" } }
      }
    },


    "/tipo_sensor": {
      "get": {
        "tags": ["Tipo Sensor"],
        "summary": "Obtener todos los tipos de sensor",
        "responses": { "200": { "description": "Lista de tipos de sensor" } }
      },

      "post": {
        "tags": ["Tipo Sensor"],
        "summary": "Crear un tipo de sensor",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "required": ["nombre", "unidad_id"],
              "properties": {
                "nombre": { "type": "string", "example": "Temperatura" },
                "descripcion": { "type": "string", "example": "Sensor que mide °C" },
                "unidad_id": { "type": "integer", "example": 1 },
                "medicion_min": { "type": "number", "example": -50 },
                "medicion_max": { "type": "number", "example": 100 }
              }
            }
          }
        ],
        "responses": { "201": { "description": "Tipo sensor creado" } }
      }
    },

    "/tipo_sensor/{id}": {
      "get": {
        "tags": ["Tipo Sensor"],
        "summary": "Obtener un tipo de sensor por ID",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "integer" }
        ],
        "responses": { "200": { "description": "Tipo sensor encontrado" } }
      },

      "delete": {
        "tags": ["Tipo Sensor"],
        "summary": "Eliminar un tipo de sensor",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "type": "integer" }
        ],
        "responses": { "200": { "description": "Eliminado" } }
      }
    },


    "/sensores": {
      "get": {
        "tags": ["Sensores"],
        "summary": "Obtener todos los sensores",
        "responses": { "200": { "description": "Lista de sensores" } }
      },

      "post": {
        "tags": ["Sensores"],
        "summary": "Crear un sensor",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "required": ["id_usuario", "tipo_id"],
              "properties": {
                "id_usuario": { "type": "integer", "example": 1001 },
                "nombre": { "type": "string", "example": "Sensor Frente" },
                "ubicacion": { "type": "string", "example": "Entrada edificio" },
                "tipo_id": { "type": "integer", "example": 3 }
              }
            }
          }
        ],
        "responses": { "201": { "description": "Sensor creado" } }
      }
    },

    "/sensores/{id}": {
      "get": {
        "tags": ["Sensores"],
        "summary": "Obtener un sensor por ID",
        "parameters": [
          { "name": "id", "in": "path", "type": "integer", "required": true }
        ],
        "responses": { "200": { "description": "Sensor encontrado" } }
      },

      "delete": {
        "tags": ["Sensores"],
        "summary": "Eliminar un sensor",
        "parameters": [
          { "name": "id", "in": "path", "type": "integer", "required": true }
        ],
        "responses": { "200": { "description": "Sensor eliminado" } }
      }
    },


    "/mediciones": {
      "get": {
        "tags": ["Mediciones"],
        "summary": "Obtener todas las mediciones",
        "responses": { "200": { "description": "Lista de mediciones" } }
      },

      "post": {
        "tags": ["Mediciones"],
        "summary": "Crear una medición",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "required": ["id_sensor", "medicion"],
              "properties": {
                "id_sensor": { "type": "integer", "example": 10 },
                "medicion": { "type": "number", "example": 21.3 }
              }
            }
          }
        ],
        "responses": { "201": { "description": "Medición creada" } }
      }
    },

    "/mediciones/{id}": {
      "get": {
        "tags": ["Mediciones"],
        "summary": "Obtener una medición por ID",
        "parameters": [
          { "name": "id", "in": "path", "type": "integer", "required": true }
        ],
        "responses": { "200": { "description": "Medición encontrada" } }
      },

      "delete": {
        "tags": ["Mediciones"],
        "summary": "Eliminar una medición",
        "parameters": [
          { "name": "id", "in": "path", "type": "integer", "required": true }
        ],
        "responses": { "200": { "description": "Eliminado" } }
      }
    },


    "/sensor": {
      "post": {
        "tags": ["Ingreso desde sensores"],
        "summary": "Registrar un valor enviado por un sensor físico",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "schema": {
              "type": "object",
              "required": ["id_usuario", "valor"],
              "properties": {
                "id_usuario": { "type": "integer", "example": 1001 },
                "valor": { "type": "number", "example": 25.7 }
              }
            }
          }
        ],
        "responses": {
          "201": { "description": "Valor registrado" },
          "400": { "description": "Error de datos" }
        }
      }
    }
  },

  "tags": [
    { "name": "Unidades" },
    { "name": "Tipo Sensor" },
    { "name": "Sensores" },
    { "name": "Mediciones" },
    { "name": "Ingreso desde sensores" }
  ]
}
